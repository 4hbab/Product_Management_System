<div
  class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full"
  id="my-modal"
>
  <div
    class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"
  >
    <div class="mt-3 text-center">
      <h3 class="text-lg leading-6 font-medium text-gray-900">
        {{ editProduct ? "Edit Product" : "Add New Product" }}
      </h3>
      <form
        [formGroup]="productForm"
        (ngSubmit)="onSubmit()"
        class="mt-2 text-left"
      >
        <div class="mb-4">
          <label
            for="productName"
            class="block text-sm font-medium text-gray-700"
            >Product Name <span class="text-red-500">*</span></label
          >
          <input
            id="productName"
            formControlName="productName"
            type="text"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            required
          />
          <p
            *ngIf="isFieldInvalid('productName')"
            class="mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage("productName") }}
          </p>
        </div>

        <div class="mb-4">
          <label for="category" class="block text-sm font-medium text-gray-700"
            >Category <span class="text-red-500">*</span></label
          >
          <select
            id="category"
            formControlName="category"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            required
          >
            <option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </option>
            <option value="new">Add New Category</option>
          </select>
          <p
            *ngIf="isFieldInvalid('category')"
            class="mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage("category") }}
          </p>
          <input
            *ngIf="isAddingNewCategory"
            formControlName="newCategory"
            type="text"
            placeholder="New Category"
            class="mt-2 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
          />
          <p
            *ngIf="isAddingNewCategory && isFieldInvalid('newCategory')"
            class="mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage("newCategory") }}
          </p>
        </div>

        <div class="mb-4">
          <label for="price" class="block text-sm font-medium text-gray-700"
            >Price <span class="text-red-500">*</span></label
          >
          <input
            id="price"
            formControlName="price"
            type="number"
            step="0.01"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            required
          />
          <p *ngIf="isFieldInvalid('price')" class="mt-1 text-sm text-red-600">
            {{ getErrorMessage("price") }}
          </p>
        </div>

        <div class="mb-4">
          <label
            for="description"
            class="block text-sm font-medium text-gray-700"
            >Description</label
          >
          <textarea
            id="description"
            formControlName="description"
            rows="3"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
          ></textarea>
        </div>

        <div class="mb-4">
          <label for="image" class="block text-sm font-medium text-gray-700"
            >Image</label
          >
          <input
            id="image"
            formControlName="image"
            type="file"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
          />
        </div>

        <div class="mb-4">
          <label for="quantity" class="block text-sm font-medium text-gray-700"
            >Quantity <span class="text-red-500">*</span></label
          >
          <input
            id="quantity"
            formControlName="quantity"
            type="number"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            required
          />
          <p
            *ngIf="isFieldInvalid('quantity')"
            class="mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage("quantity") }}
          </p>
        </div>

        <div class="mb-4">
          <label
            for="itemCreateDate"
            class="block text-sm font-medium text-gray-700"
            >Item Create Date <span class="text-red-500">*</span></label
          >
          <input
            id="itemCreateDate"
            formControlName="itemCreateDate"
            type="date"
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
            required
          />
          <p
            *ngIf="isFieldInvalid('itemCreateDate')"
            class="mt-1 text-sm text-red-600"
          >
            {{ getErrorMessage("itemCreateDate") }}
          </p>
        </div>

        <div class="flex items-center justify-between mt-6">
          <button
            type="submit"
            class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            {{ editProduct ? "Save Changes" : "Add Product" }}
          </button>
          <button
            type="button"
            (click)="onCancel()"
            class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
